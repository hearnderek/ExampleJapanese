<!DOCTYPE html>
<html lang="en">
<head>
  <title>Kotopidia</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <form>
    コトペディア検索<br>
    <input type="text" class="form-control" id="usr" name="Search">
  </form>

  <ul id='results'>
  </ul>
</div>

</body>

<script>
var results = document.getElementById('results');
var word = `$WORD`;
var values = `$VALUE`;
// split text by lines
var splits = values.trim().split("\n");
for(var i=0;i<splits.length; i++) {
	// ignore whitespace lines
	if(!(/^\s*$/.test(splits[i]))){
		var li = document.createElement("LI");
		var p = document.createElement("p");
		p.style.cssText = 'color: black';
		var txt = splits[i];
		var difficulty = txt.substring(0,4);
		li.style.cssText = `color: rgb(${difficulty*255},${255-difficulty*255},0)`;
		txt = txt.substring(5);
		var txtSplits = txt.split(word);
		for(var j=0; j<txtSplits.length-1; j++){
			var t = document.createTextNode(txtSplits[j]);
			var span = document.createElement("span");
			span.style.cssText = 'color: rgb(0, 132, 5);'
			var st = document.createTextNode(word);
			p.appendChild(t);
			span.appendChild(st);
			p.appendChild(span);
		}
		var t = document.createTextNode(txtSplits[txtSplits.length-1]);
		p.appendChild(t);
		li.appendChild(p);
		results.appendChild(li);
	}
}
</script>
</html>
